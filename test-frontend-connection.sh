#!/bin/bash

echo "ğŸ§ª TEST DIRECTO DESDE VERCEL"
echo "============================"
echo ""

echo "âœ… Backend confirmado funcionando: Status 200"
echo "âœ… CORS confirmado funcionando: Origin permitido"
echo ""

echo "ğŸ” Ahora probemos desde tu frontend..."
echo ""
echo "ğŸ“‹ INSTRUCCIONES:"
echo "1. Abre tu app: https://toolitex-ah.vercel.app"
echo "2. Abre DevTools (F12) â†’ Console"
echo "3. Ejecuta los siguientes comandos uno por uno:"
echo ""

echo "// 1. Verificar variable de entorno"
echo "console.log('API URL:', process.env.REACT_APP_API_URL);"
echo ""

echo "// 2. Test de conectividad bÃ¡sica"
echo "fetch('https://toolitexah-production.up.railway.app/')"
echo "  .then(r => r.text())"
echo "  .then(data => console.log('âœ… Backend conectado:', data))"
echo "  .catch(err => console.error('âŒ Error:', err));"
echo ""

echo "// 3. Test de registro completo"
echo "fetch('https://toolitexah-production.up.railway.app/api/auth/register', {"
echo "  method: 'POST',"
echo "  headers: { 'Content-Type': 'application/json' },"
echo "  body: JSON.stringify({"
echo "    name: 'UsuarioPrueba',"
echo "    email: 'test' + Date.now() + '@test.com',"
echo "    password: 'TestPass123@'"
echo "  })"
echo "})"
echo ".then(r => {"
echo "  console.log('Status:', r.status);"
echo "  return r.json();"
echo "})"
echo ".then(data => console.log('âœ… Registro exitoso:', data))"
echo ".catch(err => console.error('âŒ Error de registro:', err));"
echo ""

echo "ğŸ“ RESULTADOS ESPERADOS:"
echo "1. API URL debe mostrar: https://toolitexah-production.up.railway.app"
echo "2. Backend conectado debe mostrar: 'API funcionando'"
echo "3. Registro exitoso debe mostrar el token y datos del usuario"
echo ""

echo "ğŸš¨ SI VES ERRORES:"
echo "- Network Error â†’ Problema de conectividad"
echo "- CORS Error â†’ Problema de origen"
echo "- 400 Bad Request â†’ Datos invÃ¡lidos"
echo "- 404 Not Found â†’ URL incorrecta"
